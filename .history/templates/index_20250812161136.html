<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>航运早报 - 智能语音新闻平台</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <!-- 顶部导航 -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-microphone-alt"></i>
                <span>航运早报</span>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn" onclick="toggleSettings()">
                    <i class="fas fa-cog"></i>
                    <span>设置</span>
                </button>
                <button class="nav-btn" onclick="refreshNews()" title="清除缓存并获取最新新闻">
                    <i class="fas fa-sync-alt"></i>
                    <span>刷新</span>
                </button>
                <button class="nav-btn" onclick="toggleHistory()">
                    <i class="fas fa-history"></i>
                    <span>历史记录</span>
                </button>
            </div>
        </header>

        <!-- 天气滚动条（独立一行，避免挤压头部布局） -->
        <div class="weather-bar" style="width:100%; overflow:hidden; margin: 6px 0 12px 0;">
            <div id="weatherTicker" style="white-space:nowrap; overflow:hidden;">
                <span id="weatherText" style="display:inline-block; padding-left:100%; animation: scrollLeft 18s linear infinite; color:#9bdcff;"></span>
            </div>
        </div>

        <style>
            @keyframes scrollLeft {
                0% {
                    transform: translateX(0%);
                }
                100% {
                    transform: translateX(-100%);
                }
            }
        </style>

        <!-- 设置面板 -->
        <div class="settings-panel" id="settingsPanel">
            <div class="settings-content">
                <div class="settings-header">
                    <h3><i class="fas fa-cog"></i> Minimax API 配置</h3>
                    <button class="close-btn" onclick="toggleSettings()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="settings-form">
                    <div class="form-group">
                        <label for="groupId">Group ID</label>
                        <input type="text" id="groupId" placeholder="请输入您的Group ID">
                    </div>

                    <div class="form-group">
                        <label for="apiKey">API Key</label>
                        <input type="password" id="apiKey" placeholder="请输入您的API Key">
                    </div>

                    <div class="form-group">
                        <label for="weatherLocation">天气位置</label>
                        <input type="text" id="weatherLocation" placeholder="如：上海、Singapore、New York">
                    </div>

                    <div class="form-group">
                        <label for="model">模型</label>
                        <select id="model">
                            <option value="speech-2.5-hd-preview">speech-2.5-hd-preview</option>
                            <option value="speech-01">speech-01</option>
                            <option value="speech-02-hd">speech-02-hd</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="voiceId">音色</label>
                        <select id="voiceId">
                            <!-- 青年男声系列 -->
                            <option value="male-qn-qingse">青涩青年音色</option>
                            <option value="male-qn-jingying">精英青年音色</option>
                            <option value="male-qn-badao">霸道青年音色</option>
                            <option value="male-qn-daxuesheng">青年大学生音色</option>
                            
                            <!-- 女声系列 -->
                            <option value="female-shaonv" selected>少女音色</option>
                            <option value="female-yujie">御姐音色</option>
                            <option value="female-chengshu">成熟女性音色</option>
                            <option value="female-tianmei">甜美女性音色</option>
                            
                            <!-- 主持人系列 -->
                            <option value="presenter_male">男性主持人</option>
                            <option value="presenter_female">女性主持人</option>
                            
                            <!-- 有声书系列 -->
                            <option value="audiobook_male_1">男性有声书1</option>
                            <option value="audiobook_male_2">男性有声书2</option>
                            <option value="audiobook_female_1">女性有声书1</option>
                            <option value="audiobook_female_2">女性有声书2</option>
                            
                            <!-- Beta精品版 -->
                            <option value="male-qn-qingse-jingpin">青涩青年音色-beta</option>
                            <option value="male-qn-jingying-jingpin">精英青年音色-beta</option>
                            <option value="male-qn-badao-jingpin">霸道青年音色-beta</option>
                            <option value="male-qn-daxuesheng-jingpin">青年大学生音色-beta</option>
                            <option value="female-shaonv-jingpin">少女音色-beta</option>
                            <option value="female-yujie-jingpin">御姐音色-beta</option>
                            <option value="female-chengshu-jingpin">成熟女性音色-beta</option>
                            <option value="female-tianmei-jingpin">甜美女性音色-beta</option>
                            
                            <!-- 童声系列 -->
                            <option value="clever_boy">聪明男童</option>
                            <option value="cute_boy">可爱男童</option>
                            <option value="lovely_girl">萌萌女童</option>
                            <option value="cartoon_pig">卡通猪小琪</option>
                            
                            <!-- 角色扮演系列 -->
                            <option value="bingjiao_didi">病娇弟弟</option>
                            <option value="junlang_nanyou">俊朗男友</option>
                            <option value="chunzhen_xuedi">纯真学弟</option>
                            <option value="lengdan_xiongzhang">冷淡学长</option>
                            <option value="badao_shaoye">霸道少爷</option>
                            <option value="tianxin_xiaoling">甜心小玲</option>
                            <option value="qiaopi_mengmei">俏皮萌妹</option>
                            <option value="wumei_yujie">妩媚御姐</option>
                            <option value="diadia_xuemei">嗲嗲学妹</option>
                            <option value="danya_xuejie">淡雅学姐</option>
                            
                            <!-- 英文系列 -->
                            <option value="Santa_Claus">Santa Claus</option>
                            <option value="Grinch">Grinch</option>
                            <option value="Rudolph">Rudolph</option>
                            <option value="Arnold">Arnold</option>
                            <option value="Charming_Santa">Charming Santa</option>
                            <option value="Charming_Lady">Charming Lady</option>
                            <option value="Sweet_Girl">Sweet Girl</option>
                            <option value="Cute_Elf">Cute Elf</option>
                            <option value="Attractive_Girl">Attractive Girl</option>
                            <option value="Serene_Woman">Serene Woman</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="emotion">情绪</label>
                        <select id="emotion">
                            <option value="neutral">中性</option>
                            <option value="happy">开心</option>
                            <option value="sad">悲伤</option>
                            <option value="angry">愤怒</option>
                            <option value="fearful">恐惧</option>
                            <option value="disgusted">厌恶</option>
                            <option value="surprised">惊讶</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="speed">语速 <span id="speedValue">1.0</span></label>
                        <input type="range" id="speed" min="0.5" max="2.0" step="0.1" value="1.0">
                    </div>

                    <div class="form-group">
                        <label for="pitch">声调 <span id="pitchValue">0</span></label>
                        <input type="range" id="pitch" min="-12" max="12" step="1" value="0">
                    </div>

                    <div class="form-group">
                        <label for="vol">音量 <span id="volValue">1.0</span></label>
                        <input type="range" id="vol" min="0.1" max="2.0" step="0.1" value="1.0">
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="saveSettings()">
                            <i class="fas fa-save"></i>
                            保存配置
                        </button>
                        <button class="btn btn-secondary" onclick="resetSettings()">
                            <i class="fas fa-undo"></i>
                            重置
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 主内容区域 -->
        <main class="main-content">
            <!-- 新闻内容卡片 -->
            <div class="news-card">
                <div class="card-header">
                    <h2><i class="fas fa-newspaper"></i> 今日航运早报</h2>
                    <div class="news-meta">
                        <span id="newsTimestamp">--</span>
                    </div>
                </div>

                <div class="card-content">
                    <div class="news-content" id="newsContent">
                        <div class="loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <span>正在加载最新新闻...</span>
                        </div>
                    </div>
                </div>

                <div class="card-actions">
                    <button class="btn btn-primary" id="generateBtn" onclick="generateAudio()" disabled>
                        <i class="fas fa-microphone"></i>
                        <span>生成语音</span>
                    </button>

                    <button class="btn btn-secondary" id="copyBtn" onclick="copyNews()" disabled>
                        <i class="fas fa-copy"></i>
                        <span>一键复制</span>
                    </button>

                    <button class="btn btn-secondary" id="playBtn" onclick="playAudio()" disabled>
                        <i class="fas fa-play"></i>
                        <span>播放</span>
                    </button>

                    <button class="btn btn-success" id="downloadBtn" onclick="downloadAudio()" disabled>
                        <i class="fas fa-download"></i>
                        <span>下载</span>
                    </button>

                    <button class="btn btn-warning" id="shareBtn" onclick="shareAudio()" disabled style="display: none;">
                        <i class="fas fa-share-alt"></i>
                        <span>分享</span>
                    </button>
                </div>
            </div>

            <!-- 音频生成进度 -->
            <div class="audio-generation" id="audioGeneration" style="display: none;">
                <div class="generation-header">
                    <h3><i class="fas fa-magic"></i> 音频生成中</h3>
                </div>
                <div class="generation-content">
                    <div class="generation-status" id="generationStatus">
                        <i class="fas fa-cog fa-spin"></i>
                        <span id="generationText">正在准备生成...</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="progress-text">
                            <span id="progressPercent">0%</span>
                            <span id="progressTime">预计时间: --</span>
                        </div>
                    </div>
                    <div class="generation-tips">
                        <p><i class="fas fa-info-circle"></i> 正在使用Minimax AI技术生成高质量语音，请耐心等待...</p>
                    </div>
                </div>
            </div>

            <!-- 音频播放器 -->
            <div class="audio-player" id="audioPlayer" style="display: none;">
                <div class="player-header">
                    <h3><i class="fas fa-volume-up"></i> 语音播放器</h3>
                </div>
                <div class="player-content">
                    <audio controls id="audioElement" style="width: 100%;">
                        您的浏览器不支持音频播放。
                    </audio>
                </div>
            </div>

            <!-- 历史记录面板 -->
            <div class="history-panel" id="historyPanel">
                <div class="history-content">
                    <div class="history-header">
                        <h3><i class="fas fa-history"></i> 历史记录</h3>
                        <button class="close-btn" onclick="toggleHistory()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <div class="history-form">
                        <div id="historyDateList" class="history-date-list">
                            <div class="loading">
                                <i class="fas fa-spinner fa-spin"></i>
                                <span>正在加载历史记录...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 历史记录详情模态框 -->
            <div id="historyDetailModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="historyDetailTitle">
                            <i class="fas fa-calendar-day"></i> 早报详情
                        </h3>
                        <button class="close-btn" onclick="hideHistoryDetail()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div id="historyDetailContent" class="history-detail-content">
                            <!-- 历史记录详细内容将在这里显示 -->
                        </div>
                        <div class="modal-actions">
                            <button class="btn btn-primary" onclick="copyHistoryDetail()">
                                <i class="fas fa-copy"></i>
                                复制内容
                            </button>
                            <button class="btn btn-secondary" onclick="loadHistoryToMain()">
                                <i class="fas fa-arrow-left"></i>
                                加载到主界面
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 状态提示 -->
            <div class="status-message" id="statusMessage" style="display: none;">
                <div class="message-content">
                    <i class="fas fa-info-circle"></i>
                    <span id="messageText">状态信息</span>
                </div>
            </div>
        </main>

        <!-- 底部信息 -->
        <footer class="footer">
            <div class="footer-content">
                <p><i class="fas fa-robot"></i> 航运早报 - 基于Minimax语音合成技术</p>
                <p>让航运资讯有声有色</p>
            </div>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>