# AIæ—©æŠ¥åº”ç”¨éƒ¨ç½²æŒ‡å—

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ–¹å¼ä¸€ï¼šDockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. å®‰è£…å‰ç½®æ¡ä»¶
```bash
# å®‰è£…Dockerå’ŒDocker Compose
# macOS (ä½¿ç”¨Homebrew)
brew install docker docker-compose

# Ubuntu/Debian
sudo apt-get update
sudo apt-get install docker.io docker-compose

# CentOS/RHEL
sudo yum install docker docker-compose
```

#### 2. ä¸€é”®éƒ¨ç½²
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd aizaobao

# è¿è¡Œéƒ¨ç½²è„šæœ¬
./deploy.sh
```

#### 3. æ‰‹åŠ¨éƒ¨ç½²
```bash
# 1. æ„å»ºé•œåƒ
docker-compose build

# 2. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 3. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# 4. åœæ­¢æœåŠ¡
docker-compose down
```

### æ–¹å¼äºŒï¼šç›´æ¥éƒ¨ç½²

#### 1. å®‰è£…ä¾èµ–
```bash
# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt
```

#### 2. é…ç½®ç¯å¢ƒ
```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶
cp config.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim .env
```

#### 3. å¯åŠ¨åº”ç”¨
```bash
# å¼€å‘ç¯å¢ƒ
./start.sh

# ç”Ÿäº§ç¯å¢ƒ
FLASK_ENV=production ./start.sh
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®
åˆ›å»º `.env` æ–‡ä»¶ï¼š
```bash
# Flaské…ç½®
FLASK_ENV=production
FLASK_DEBUG=False
SECRET_KEY=your-secret-key-here

# åº”ç”¨é…ç½®
HOST=0.0.0.0
PORT=6888

# Minimax APIé…ç½®ï¼ˆå¯é€‰ï¼‰
MINIMAX_GROUP_ID=your-group-id
MINIMAX_API_KEY=your-api-key
```

### Minimax APIé…ç½®
1. è®¿é—® [Minimaxå¹³å°](https://platform.minimaxi.com)
2. è·å– `Group ID` å’Œ `API Key`
3. åœ¨åº”ç”¨ç•Œé¢çš„è®¾ç½®é¢æ¿ä¸­é…ç½®
4. æˆ–åœ¨ç¯å¢ƒå˜é‡ä¸­é¢„è®¾

## ğŸŒ è®¿é—®åº”ç”¨

éƒ¨ç½²æˆåŠŸåï¼Œè®¿é—®ï¼š
- **æœ¬åœ°è®¿é—®**: http://localhost:6888
- **å±€åŸŸç½‘è®¿é—®**: http://[æœåŠ¡å™¨IP]:6888

## ğŸ“Š è¿ç»´ç®¡ç†

### Dockerç¯å¢ƒ
```bash
# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
docker-compose ps

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
docker-compose logs -f

# é‡å¯æœåŠ¡
docker-compose restart

# æ›´æ–°åº”ç”¨
docker-compose down
docker-compose build --no-cache
docker-compose up -d

# æ¸…ç†èµ„æº
docker-compose down --volumes --rmi all
```

### ä¼ ç»Ÿéƒ¨ç½²
```bash
# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep python

# é‡å¯æœåŠ¡
pkill -f "python.*app.py"
./start.sh

# æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/ai-news.log
```

## ğŸ”’ å®‰å…¨é…ç½®

### 1. é˜²ç«å¢™è®¾ç½®
```bash
# Ubuntu/Debian
sudo ufw allow 6888

# CentOS/RHEL
sudo firewall-cmd --permanent --add-port=6888/tcp
sudo firewall-cmd --reload
```

### 2. åå‘ä»£ç†ï¼ˆNginxï¼‰
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://localhost:6888;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

### 3. SSLè¯ä¹¦ï¼ˆLet's Encryptï¼‰
```bash
# å®‰è£…Certbot
sudo apt-get install certbot python3-certbot-nginx

# ç”³è¯·è¯ä¹¦
sudo certbot --nginx -d your-domain.com
```

## ğŸ› æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

1. **ç«¯å£å ç”¨**
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :6888

# æ€æ‰å ç”¨è¿›ç¨‹
sudo kill -9 [PID]
```

2. **ä¾èµ–å®‰è£…å¤±è´¥**
```bash
# å‡çº§pip
pip install --upgrade pip

# æ¸…ç†ç¼“å­˜
pip cache purge

# é‡æ–°å®‰è£…
pip install -r requirements.txt --force-reinstall
```

3. **Playwrightæµè§ˆå™¨é—®é¢˜**
å¦‚æœé‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š
```
BrowserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium-1134/chrome-linux/chrome
```

**Dockerç¯å¢ƒï¼ˆæ¨èï¼‰ï¼š** 
- æ–°ç‰ˆDockerfileå·²è‡ªåŠ¨å®‰è£…Playwrightæµè§ˆå™¨
- é‡æ–°æ„å»ºé•œåƒå³å¯è§£å†³

**æœ¬åœ°ç¯å¢ƒè§£å†³æ–¹æ¡ˆï¼š**
```bash
# å®‰è£…Playwrightæµè§ˆå™¨
playwright install chromium
playwright install-deps chromium

# å¦‚æœæƒé™é—®é¢˜ï¼Œä½¿ç”¨sudo
sudo playwright install chromium
sudo playwright install-deps chromium
```

4. **æƒé™é—®é¢˜**
```bash
# ä¿®å¤ç›®å½•æƒé™
chmod -R 755 .
chmod +x *.sh
```

### æ—¥å¿—æŸ¥çœ‹
```bash
# Dockerç¯å¢ƒ
docker-compose logs -f ai-news

# ä¼ ç»Ÿéƒ¨ç½²
tail -f app.log
```

## ğŸ”„ æ›´æ–°ç»´æŠ¤

### ä»£ç æ›´æ–°
```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull

# 2. æ›´æ–°ä¾èµ–
pip install -r requirements.txt

# 3. é‡å¯æœåŠ¡
docker-compose restart
# æˆ–
./start.sh
```

### æ•°æ®å¤‡ä»½
```bash
# å¤‡ä»½ç¼“å­˜æ•°æ®
tar -czf backup-$(date +%Y%m%d).tar.gz cache/ static/audio/

# æ¢å¤æ•°æ®
tar -xzf backup-20250807.tar.gz
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. è°ƒæ•´Workeræ•°é‡
ç¼–è¾‘ `gunicorn.conf.py`ï¼š
```python
workers = 4  # CPUæ ¸å¿ƒæ•° * 2
```

### 2. ç¼“å­˜é…ç½®
- ç¼“å­˜ç›®å½•ï¼š`cache/`
- éŸ³é¢‘ç›®å½•ï¼š`static/audio/`
- è‡ªåŠ¨æ¸…ç†ï¼š7å¤©å‰çš„æ—§æ–‡ä»¶

### 3. ç›‘æ§æŒ‡æ ‡
- CPUä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨ç‡
- ç£ç›˜ç©ºé—´
- ç½‘ç»œè¿æ¥æ•°

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. éƒ¨ç½²æ–¹å¼ï¼ˆDocker/ç›´æ¥ï¼‰
2. æ“ä½œç³»ç»Ÿä¿¡æ¯
3. é”™è¯¯æ—¥å¿—
4. å¤ç°æ­¥éª¤

ç¥æ‚¨éƒ¨ç½²é¡ºåˆ©ï¼ğŸ‰
